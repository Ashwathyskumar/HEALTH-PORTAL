<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        .container {
            background-color: #f2f2f2;
            padding: 1rem;
        }
        h3 {
            font-size: 1.5rem;
            color: #333;
        }
        form {
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
        }
        select {
            display: block;
            width: 100%;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #495057;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            margin-bottom: 0.5rem;
        }
        select:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        input[type="number"] {
            display: block;
            width: 100%;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #495057;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            margin-bottom: 1rem;
        }
        input[type="number"]:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .quantity-label {
            display: flex;
            justify-content: space-between;
        }
        .quantity-label label {
            margin-right: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h3><center>Refill Prescription</center></h3>
        <label for="medicine1">Medicine 1</label>
        <select name="medicine1" id="medicine1">
            <option th:text="${lm.medicine1}"></option>
        </select>
        <form>
            <label for="quantity1">Quantity</label>
            <input type="number" id="quantity1" name="quantity1" min="0" th:max="${lm.dosage1}" onchange="updatePrice(1)">
        </form>
        <label for="price1">Price</label>
        <span id="price1">Price: $10</span>
        <br><br>

        <label for="medicine2">Medicine 2</label>
        <select name="medicine2" id="medicine2">
            <option th:text="${lm.medicine2}"></option>
        </select>
        <form>
            <label for="quantity2">Quantity</label>
            <input type="number" id="quantity2" name="quantity2" min="0" th:max="${lm.dosage2}" onchange="updatePrice(2)">
        </form>
        <label for="price2">Price</label>
        <span id="price2">Price: $20</span>
        <br><br>

        <label for="medicine3">Medicine 3</label>
        <select name="medicine3" id="medicine3">
            <option th:text="${lm.medicine3}"></option>
        </select>
        <form>
            <label for="quantity3">Quantity</label>
            <input type="number" id="quantity3" name="quantity3" min="0" th:max="${lm.dosage3}" onchange="updatePrice(3)">
        </form>
        <label for="price3">Price</label>
        <span id="price3">Price: $30</span>
        <br><br>

        <label for="medicine4">Medicine 4</label>                                                                                                                                                                                              
        <!-- Code for Medicine 4 -->
        <select name="medicine4" id="medicine4">
            <option th:text="${lm.medicine4}"></option>
        </select>
        <form>
            <label for="quantity4">Quantity</label>
            <input type="number" id="quantity4" name="quantity4" min="0" th:max="${lm.dosage4}" onchange="updatePrice(4)">
        </form>
        <label for="price4">Price</label>
        <span id="price4">Price: $40</span>
        <br><br>

        <label for="totalPrice">Total Price</label>
        <span id="totalPrice">Total Price: $0</span>
    </div>

    <script>
        // Function to update price based on quantity changes
        function updatePrice(medicineId) {
            // Get the quantity value
            var quantity = document.getElementById('quantity' + medicineId).value;

            // Calculate the price based on quantity
            var price = 0;
            switch (medicineId) {
                case 1:
                    price = quantity * 10;
                    break;
                case 2:
                    price = quantity * 20;
                    break;
                case 3:
                    price = quantity * 30;
                    break;
                case 4:
                    price = quantity * 40;
                    break;
            }

            // Update the price element
            document.getElementById('price' + medicineId).innerText = 'Price: $' + price;

            // Update the total price
            updateTotalPrice();
        }

        // Function to update total price
        function updateTotalPrice() {
            var totalPrice = 0;

            // Loop through all medicines and calculate the total price
            for (var i = 1; i <= 4; i++) {
                var quantity = document.getElementById('quantity' + i).value;
                var price = 0;
                switch (i) {
                    case 1:
                        price = quantity * 10;
                        break;
                    case 2:
                        price = quantity * 20;
                        break;
                    case 3:
                        price = quantity * 30;
                        break;
                    case 4:
                        price = quantity * 40;
                        break;
                }
                totalPrice += price;
            }

            // Update the total price element
            document.getElementById('totalPrice').innerText = 'Total Price: $' + totalPrice;
        }
    </script>
</body>
</html>                             